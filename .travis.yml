language: node_js
node_js:
- '8'
before_install:
- sudo apt-get -qq update
- sudo apt-get install -y libxml2-dev
- npm install -g eslint
- npm install --save-dev eslint-plugin-jasmine -g
- npm install --save-dev babel-eslint -g
- npm install --save-dev eslint-plugin-inferno -g
- npm install -g codecov
script:
- npm run test -- --coverage && codecov
- npm run eslint
deploy:
  provider: heroku
  api_key:
    secure: rZMRLPoHUE46p4uqnHYE8Skh+D43RJrG88fbQD03GdRxuNCa50zBLR+PP99pHLhRdUkXfGiTaBkFHsu+up8pBQDcysY/RY4+B+V0pgTb+9qE8iHnmVvBADqhTzSUKjtoXvdGWIoaqBVsfnTQN9q9C2briPAToqJKjDybwn5GI7pmyWlWOv7X3rSyNF/ls9EbxrO1xLWNm94rPZVbbkxYvKlRvzsUZSNpexoRmQiVSxoos0sVV8/Aj6VZtlZzF3b99VoXD/l3FIrHO83F6izGf8Oh4vN8XbgV6g4mY0u639cSqtR3Osdd+ENppCKHaeKbNCfMjzIW2CHt3rvUSR2RkH9CLdESxt2t/jQDDcDazsM6+3FEw1vDAgvP/TAqt6oYtRDgfMcGr7eGYdQL1ZfLwU49R2dWp1x28z1O9O1bXKLaXgouBpcEpacfPfK4HBIz+3H/w2NYXK4z2WypUeHIfnTmD4rBz7cN8Nywz9sd1cbcTnDGkyU1UewIZLui3lbd8X6nHz7W0db/1S0FPlxvonr9TDr9juGsloh0Kfr9l1TO8rdskrbD+DupAKn2Ivip6GdvyOg38edoswB19t7xniiee1sGMd6GE/X81fo33EXGVaf7prqLTmD+Y9v9GL24zO/NbhbqIVe5kq+0d8HAwoOQljYdxM52EYOSxFoaDs8=
  app: inferno-todos
  on:
    branch: master
    repo: dydyFos/infernoTodos
    run:
    - npm build
    - rm .eslintrc.js
    - rm .gitignore
    - rm .snyk
    - rm .travis.yml
    - rm README.md
    - mv ./build/index.html .
    - mv ./build/static .
    - rm -rf ./public
    - rm -rf ./src
    - rm -rf ./fixtures
    - rm -rf ./build
    - rm -rf ./node_modules
    - rm -rf ./coverage
    - rm -rf ./git
after_success:
- git clone https://travis:$GITHUB_TOKEN@github.com/dydyFos/infernoTodos.git web
- cd web
- npm install
- npm run deploy
notifications:
  slack:
    secure: WtI9o+J00lRyYGNx2w4yInYwJoWQvtpE1AS2LuMSC5z7hkVNtyI6XXvgyLxESVzFftHXLNMpbWaPAGld3+vyiYHLDWzuQQTP43aLrQuIP+oKcCMAPwuDe9fQEBF6NHT5gypAi0GjDHUWHm3rboD90p5IwFUuGu8z3NGsAT6f8ygqBI3EIRUINO+U9SiWIdkkRJTkn54TEXjx2rJYJSbDzKhRGzjEZj1qL+WttThPGK+1iqth/S+ACF+p8/b5uVmChstSNhgkTvsDWKgui/i/osxHjBHzMYtxNqvxI8UsSDLDBHN7ObaI0QfKIJaQMuFgiyMTqm1FoGIHpa8pDz70DK7IGsuUIU3k8230ixSH4WiVvVpmkOhVCYsTGSEWwbphU1Dx55j5vS9t0tRpl2GtzKkyumGAfNriEh1JtzyEbktOnqEjVKbDfwHwMRtBGmCGMsK4KCTfA6AwP0IK6KFBn+UBrTh633KrSLjp0LtDDnt5ol5wHpxf5/4zw48OC0o1wDYJjuf+Q06tLYy9nzKbvVTCbg8Y/49gJw15l7r8XWm7UsgUVLsDU7ei9VNYwwBbihczTKgGbfkZjfFpPR9cJgcL/YTgahuqaN6hsTOkk02W5CXZKh/WX9ZKeiuCKhKt10hYc6wOu6S/sCPjKI8NQYXc7wY3qzW/QmCzKOye5OY=
    enabled: true
    on_success: true
    on_fail: true
    on_install: true
    on_deploy: true
